<?php

use PuraUserModel\Entity\PuraUserEntity;

/**
 * ${NAME}
 *
 * PHP version 5
 *
 * Copyright (C) project swissbib, University Library Basel, Switzerland
 * http://www.swissbib.org  / http://www.swissbib.ch / http://www.ub.unibas.ch
 *
 * Date: 09.02.18
 * Time: 14:20
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2,
 * as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 *
 * @category Swissbib_VuFind2
 * @package  ${PACKAGE}
 * @author   Lionel Walter <lionel.walter@unibas.ch>
 * @license  http://opensource.org/licenses/gpl-2.0.php GNU General Public License
 * @link     http://www.swissbib.org
 */

/**
 * @var PuraUserEntity $puraUserEntity
 */
?>


<?php if ($puraUserEntity->getBarcode()): ?>

    <?php if (!empty($message)): ?>
        <div class="alert alert-success" role="alert">
            <?= $message ?>
        </div>
    <?php endif; ?>



    <h4>User</h4>

    <form class="form-horizontal">
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">First Name:</label>
            <div class="mx-sm-6 mb-2">
            <input type="text" readonly class="form-control" value="<?= $puraUserEntity->getFirstname() ?>">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Last Name:</label>
            <div class="mx-sm-6 mb-2">
            <input type="text" readonly class="form-control" value="<?= $puraUserEntity->getLastname()  ?>">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Email:</label>
            <div class="mx-sm-6 mb-2">
            <input type="text" readonly class="form-control" value="<?= $puraUserEntity->getEmail()  ?>">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Barcode:</label>
            <div class="mx-sm-6 mb-2">
            <input type="text" readonly class="form-control" value="<?= $puraUserEntity->getBarcode()  ?>">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">SWITCH edu-id:</label>
            <div class="mx-sm-6 mb-2">
            <input type="text" readonly class="form-control" value="<?= $puraUserEntity->getEduId()  ?>">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Active:</label>
            <div class="mx-sm-6 mb-2">
            <input type="text" readonly class="form-control" value="<?= $puraUserEntity->getHasAccess() ? 'yes' : 'no'  ?>">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Activation date:</label>
            <div class="mx-sm-6 mb-2">
            <input type="text" readonly class="form-control" value="<?= $puraUserEntity->getAccessCreated()  ?>">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Valid until:</label>
            <div class="mx-sm-6 mb-2">
            <input type="text" readonly class="form-control" value="<?= $puraUserEntity->getDateExpiration()  ?>">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Blocked:</label>
            <div class="mx-sm-6 mb-2">
            <input type="text" readonly class="form-control" value="<?= $puraUserEntity->getBlocked() ? 'yes' : 'no'  ?>">
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Blocking date:</label>
            <div class="mx-sm-6 mb-2">
            <input type="text" readonly class="form-control" value="<?= $puraUserEntity->getBlockedCreated()  ?>">
            </div>
        </div>
    </form>

    <div class="form-group row">


        <label class="col-sm-2 col-form-label"></label>
        <div class="mx-sm-6 mb-2">
        <form class="form-inline" action="<?= $this->url('purauser.barcodeentry') ?>" method="POST" name="barcodeEntry-form" id="barcodeEntry-form">

                <input class="form-control" name="barcodeEntry" type="hidden" value="<?= $puraUserEntity->getBarcode() ?>">
            <button type="submit" class="btn btn-primary mb-2">Activate / Extend this user</button>
        </form>
        </div>
    </div>












    <h4>Edit User Information</h4>

    <form action="" method="POST" name="edit-form" id="edit-form" class="form-horizontal">
        <div class="form-group row">
            <label for="AlephNumber" class="col-sm-2 col-form-label">Aleph Number</label>
            <div class="mx-sm-6 mb-2">
                <input type="text" class="form-control" id="AlephNumber" name="edit-alephNr" value="<?= $puraUserEntity->getLibrarySystemNumber() ?>">
            </div>
        </div>
        <div class="form-group row">
            <label for="Remark" class="col-sm-2 col-form-label">Remark</label>
            <div class="mx-sm-6 mb-2">
                <textarea name="edit-remark" class="form-control" id="Remark" rows="5" cols=""><?= $puraUserEntity->getRemarks() ?></textarea>
            </div>
        </div>
        <fieldset class="form-group">
            <div class="row">
                <legend class="col-form-label col-sm-2 pt-0">Enrolled in an <a href="#" data-toggle="tooltip" data-placement="left" title="SchülerInnen, LehrerInnen, Mitarbeitende von Primarstufe, Sekundarstufe I, Sekundarstufe II (Berufliche Grundbildung, Gymnasien, Fachmittelschulen) ; Studierende, Dozierende, Mitarbeitende der Tertiärstufe (Höhere Fachschulen, Fachhochschulen, Universitäten)">Education&nbsp;Institution</a></legend>
                <div class="col-sm-10">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="edit-member-education-institution" id="gridRadios1" value="1" <?= $puraUserEntity->getIsMemberEducationInstitution() ? 'checked' : '' ?> >
                        <label class="form-check-label" for="gridRadios1">
                            Yes
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="edit-member-education-institution" id="gridRadios2" value="0" <?= $puraUserEntity->getIsMemberEducationInstitution() ? '' : 'checked' ?> >
                        <label class="form-check-label" for="gridRadios2">
                            No
                        </label>
                    </div>
                </div>
            </div>
        </fieldset>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label"></label>
            <div class="mx-sm-6 mb-2">
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
        </div>
    </form>

    <h4>Special Actions</h4>

    <div>
    <a href="<?= $this->url('purauser.block', ['barcode' => $puraUserEntity->getBarcode()]) ?>" name="edit-blockFromLib-form" id="edit-blockAllLibs-form">
        <input type="submit" name="block" class="btn btn-outline-danger" value="Block this user for my library">
    </a>
    <br><br>
    </div>

<?php else:; ?>
    <span>Search a user on the left.</span>
<?php endif; ?>
